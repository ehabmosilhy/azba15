<?xml version="1.0" encoding="utf-8"?>
<odoo>


    <template id="azbah_customer_invoice">
        <t t-foreach="docs" t-as="o">


            <t t-set="o" t-value="o.with_context(lang=lang)"/>
            <t t-call="web.html_container">


                <div class="article mt0 o_report_layout_standard"
                     style="direction:ltr !important;">

                    <div style="caption-side:top; color: Black;   text-align: center; direction:ltr !important;">-->
                        <span t-field="o.name"></span>
                    </div>

                    <table class="row custom-line align-self-start"
                           style="float:left;  width: 100%;
                            direction:ltr !important;padding-top: 0px;
                           border: 1px solid black;table-layout : fixed;
                           margin-top: 7cm;">

                        <tr style="direction:ltr !important;text-align: left;">
                            <td style="width: 22.5%;vertical-align:top; border: 1px solid black;">
                                Invoice # | رقم الفاتورة
                            </td>

                            <td style="width: 22.5%;vertical-align:top; border: 1px solid black;">
                                <span t-field="o.name"/>
                            </td>

                            <td style="width: 10% ;">
                                <![CDATA[&nbsp;]]>
                            </td>

                            <td style="width: 22.5%;vertical-align:top; border: 1px solid black;">
                                Date | التاريخ
                            </td>

                            <td style="width: 22.5%;vertical-align:top; border: 1px solid black;">
                                <span t-field="o.invoice_date"
                                      style="direction:ltr !important;"/>
                            </td>

                        </tr>

                        <tr style="direction:ltr !important;text-align: left;">
                            <td style="width: 22.5%;vertical-align:top; border: 1px solid black;">
                                Payment terms | شروط الدفع
                            </td>

                            <td style="width: 22.5%;vertical-align:top; border: 1px solid black;">
                                <span t-field="o.partner_id.property_payment_term_id"
                                      style="direction:ltr !important;"/>
                            </td>

                            <td style="width: 10% ;">
                                <![CDATA[&nbsp;]]>

                            </td>

                            <td style="width: 22.5%;vertical-align:top; border: 1px solid black;">
                               Payment Method|طريقة الدفع
                            </td>

                            <td style="width: 22.5%;vertical-align:top; border: 1px solid black;">
                                <t t-foreach="o._get_reconciled_payments()" t-as="pay">
                                    <t t-esc="pay.journal_id.name"/>
                                    &amp;nbsp;
                                </t>
                            </td>

                        </tr>


                        <tr style="direction:ltr !important;text-align: left;">
                            <td style="width: 22.5%;vertical-align:top; border: 1px solid black;">
                                Due Date | تاريخ الإستحقاق

                            </td>

                            <td style="width: 22.5%;vertical-align:top; border: 1px solid black;">
                                <span t-field="o.invoice_date_due"
                                      style="direction:ltr !important;"/>
                            </td>


                            <td style="width: 10% ;">
                                <![CDATA[&nbsp;]]>

                            </td>
                            <td style="width: 22.5%;vertical-align:top; border: 1px solid black;">
                                Sales order | أمر البيع

                            </td>

                            <td style="width: 22.5%;vertical-align:top; border: 1px solid black;">
                                <span t-field="o.invoice_origin"/>
                            </td>
                        </tr>


                        <tr style="direction:ltr !important;text-align: left;">
                            <td style="width: 22.5%;vertical-align:top; border: 1px solid black;">
                                Reference | المرجع

                            </td>

                            <td style="width: 22.5%;vertical-align:top; border: 1px solid black;">
                                <span t-field="o.ref"/>
                            </td>


                            <td style="width: 10% ;">
                                <![CDATA[&nbsp;]]>

                            </td>
                            <td style="width: 22.5%;vertical-align:top; border: 1px solid black;">
                                Sales order | أمر البيع

                            </td>

                            <td style="width: 22.5%;vertical-align:top; border: 1px solid black;">
                                <span t-field="o.invoice_origin"/>
                            </td>
                        </tr>


                        <tr style="direction:ltr !important;text-align: left;">
                            <td style="width: 22.5%;vertical-align:top; border: 1px solid black;">
                                VAT | الرقم الضريبي

                            </td>

                            <td style="width: 22.5%;vertical-align:top; border: 1px solid black;">
                                <div t-field="o.partner_id.vat"></div>
                            </td>


                            <td style="width: 10% ;">
                                <![CDATA[&nbsp;]]>

                            </td>
                            <td style="width: 22.5%;vertical-align:top; border: 1px solid black;">
                                Delivery address | عنوان التوصيل
                            </td>

                            <td style="width: 22.5%;vertical-align:top; border: 1px solid black;">
                                <div t-field="o.partner_shipping_id"
                                     t-options='{"widget": "contact", "fields": ["address","street","street2","city","state_id","zip", "country_id"], "no_marker": True}'>

                                </div>
                            </td>
                        </tr>


                    </table>

                    <table class="table"
                           style="direction:ltr !important;  margin-top: 420px;  width: 100%;  margin-bottom: 0px !important;  ">
                        <thead style="direction:ltr !important;">


                            <tr class="table-info "
                                style="border-bottom: 3px solid black !important; direction:ltr !important;">

                                <th colspan="10"
                                    style="direction:ltr !important; text-align: left; width: 70%;  ">
                                    Description
                                    <br/>
                                    الوصف
                                </th>

                                <th style="direction:ltr !important; text-align: left;">
                                    Qty
                                    الكمية
                                </th>
                                <th style="direction:ltr !important; text-align: left;"
                                >
                                    Unit
                                    الوحدة
                                </th>
                                <th
                                        style="direction:ltr !important; text-align: left; ">
                                    Sales price
                                    <br/>
                                    سعر البيع
                                </th>
                                <th style="direction:ltr !important; text-align: left;"
                                >
                                    Amount
                                    <br/>
                                    المبلغ
                                </th>
                                <th
                                        style="direction:ltr !important; text-align: left;">
                                    Tax Amount
                                    <br/>
                                    القيمة الضريبة
                                </th>
                                <th
                                        style=" direction:ltr !important; text-align: left;">
                                    Tax %
                                    <br/>
                                    نسبة
                                </th>
                                <th
                                        style=" direction:ltr !important; text-align: left;  ">
                                    Amount after Tax
                                    <br/>
                                    الاجمالي بعد الضريبة
                                </th>
                            </tr>

                        </thead>

                        <tbody style="direction:ltr !important;">

                            <tr t-foreach="o.invoice_line_ids" t-as="line"
                                style="border-bottom: 3px solid black !important; direction:ltr !important;">


                                <td colspan="10"
                                    style="direction:ltr !important; text-align: left; width: 70%;">
                                    <span t-field="line.with_context(lang='ar_001').product_id"
                                          style="direction:ltr !important;"/>
                                </td>


                                <td style="direction:ltr !important; text-align: left;"
                                >
                                    <span t-field="line.quantity"
                                          style="direction:ltr !important;"/>
                                </td>
                                <td style="direction:ltr !important; text-align: left;"
                                >
                                    <span t-field="line.product_uom_id"/>
                                </td>
                                <td style="direction:ltr !important; text-align: left;"
                                >
                                    <span t-field="line.price_unit"
                                          style="direction:ltr !important;"/>
                                </td>


                                <td style="direction:ltr !important; text-align: left;"
                                >

                                    <span class="text-nowrap"
                                          style="direction:ltr !important;"
                                          t-field="line.price_subtotal"
                                          groups="account.group_show_line_subtotals_tax_excluded"/>
                                    <span class="text-nowrap"
                                          style="direction:ltr !important;" t-field="line.price_total"
                                          groups="account.group_show_line_subtotals_tax_included"/>
                                </td>
                                <td style="direction:ltr !important; text-align: left;"
                                >
                                    <span t-field="line.amount_tax"/>
                                </td>

                                <td style="direction:ltr !important; text-align: left;"
                                >
                                    <span
                                            t-esc="', '.join(map(lambda x: (x.description or x.name), line.tax_ids))"
                                            id="line_tax_ids"/>

                                </td>
                                <td style="direction:ltr !important; text-align: left;"
                                >
                                    <t t-set="current_total_with_tax"
                                       t-value="line.amount_tax+line.price_subtotal"/>
                                    <span t-esc="current_total_with_tax"
                                          t-options='{"widget": "monetary", "display_currency": o.currency_id}'/>
                                </td>
                            </tr>

                        </tbody>
                    </table>

                    <table class="table"
                           style="direction:ltr !important;margin-bottom:0px !important;width: 122.5%;table-layout: auto;  ">
                        <thead style="direction:ltr !important;">
                            <tr class="table-info "
                                style="border-bottom: 3px solid black !important; direction:ltr !important;">
                                <th scope="col"
                                    style=" direction:ltr !important; text-align: left;">
                                    Total invoice before VAT
                                    <br/>
                                    اجمالي الفاتورة قبل الضريبة
                                </th>
                                <th scope="col"
                                    style=" direction:ltr !important; text-align: left;">
                                    Total discount
                                    <br/>
                                    اجمالي الخصم
                                </th>

                                <th style=" direction:ltr !important; text-align: left;">
                                    VAT amount
                                    <br/>
                                    مبلغ الضريبة
                                </th>

                                <th style=" direction:ltr !important; text-align: left;">
                                    Total
                                    <br/>
                                    الاجمالي
                                </th>
                                <th style=" direction:ltr !important; text-align: left;">
                                    Currency
                                    <br/>
                                    العملة
                                </th>

                            </tr>
                        </thead>


                        <tbody style="direction:ltr !important;">
                            <tr style="direction:ltr !important;">

                                <td style="direction:ltr !important; text-align: left;">
                                    <span t-field="o.amount_untaxed"
                                          style="direction:ltr !important;"/>
                                </td>
                                <td style="direction:ltr !important; text-align: left;">
                                    <span
                                            t-esc="sum(l.discount*l.price_unit*l.quantity*0.01 for l in o.invoice_line_ids)"
                                            t-options='{"widget": "monetary", "display_currency": o.currency_id}'/>
                                </td>


                                <td class=" o_price_total"
                                    style="direction:ltr !important; text-align: left;">
                                    <span t-field="o.amount_tax"
                                          style="direction:ltr !important;"/>

                                </td>


                                <td style="direction:ltr !important; text-align: left;">
                                    <span t-if="o.amount_total"
                                          style="direction:ltr !important;" t-field="o.amount_total"/>
                                </td>


                                <td style="direction:ltr !important; text-align: left;">
                                    <span style="direction:ltr !important;"
                                          t-field="o.currency_id"/>
                                </td>

                            </tr>

                        </tbody>
                    </table>
                    <h5 style="text-align: left;">
                        <span style="padding-left: 10px;"
                              t-esc="o.currency_id.with_context(lang='en_US').amount_to_text(o.amount_total)"/>
                    </h5>
                    <br/>
                    <style>

                    </style>
                    <table
                            style="float: right;  width: 550px;  border-collapse:collapse; direction:ltr !important; ">
                        <thead style="direction:ltr !important; text-align: left;">
                            <tr style="direction:ltr !important; text-align: left;">
                                <th colspan="2"
                                    style="border:1px solid black;direction:ltr !important; text-align: left;padding-left: 10px;">
                                    Bank Details / تفاصيل البنك
                                </th>

                            </tr>
                        </thead>
                        <tbody style="direction:ltr !important;">
                            <tr style="direction:ltr !important; text-align: left;">

                                <td
                                        style="border:1px solid black; direction:ltr !important; text-align: left; padding-left: 10px;">
                                    Bank Name /إسم البنك
                                </td>
                                <td
                                        style="border:1px solid black; direction:ltr !important; text-align: left;">
                                    <span
                                            t-if="o.company_id.partner_id.bank_ids and o.company_id.partner_id.bank_ids[0].bank_id"
                                            style="direction:ltr !important; text-align: left;"
                                            t-field="o.company_id.partner_id.bank_ids[0].bank_id"/>
                                </td>

                            </tr>
                            <tr style="direction:ltr !important; text-align: left;">

                                <td
                                        style="border:1px solid black;direction:ltr !important; text-align: left; padding-left: 10px;">
                                    Account Name /إسم الحساب
                                </td>
                                <td
                                        style="border:1px solid black; direction:ltr !important; text-align: left;">
                                    <span t-field="o.company_id.partner_id"
                                          style="direction:ltr !important; text-align: left;"></span>
                                </td>

                            </tr>
                            <tr style="direction:ltr !important; text-align: left;">

                                <td
                                        style="border:1px solid black; direction:ltr !important; text-align: left;padding-left: 10px;">
                                    Account number/ رقم الحساب
                                </td>
                                <td
                                        style="border:1px solid black; direction:ltr !important; text-align: left;">
                                    <span
                                            t-if="o.company_id.partner_id.bank_ids and o.company_id.partner_id.bank_ids[0].acc_number"
                                            style="direction:ltr !important; text-align: left;"
                                            t-field="o.company_id.partner_id.bank_ids[0].acc_number"/>
                                </td>
                            </tr>

                        </tbody>
                    </table>


                    <t t-if="o.l10n_sa_qr_code_str">
                        <div
                                style="width:150px;height:150px;float:left;direction:ltr !important;   margin-left: 100px;">

                            <img style="text-align: center" t-if="o.l10n_sa_qr_code_str"
                                 t-att-src="'/report/barcode/?type=%s&amp;value=%s&amp;width=%s&amp;height=%s'%('QR', o.l10n_sa_qr_code_str, 150, 150)"/>
                        </div>
                    </t>


                </div>

                <div class="footer" style="direction:ltr !important;">
                    <p
                            style="float: left; width: 340px; height: 100px;margin-bottom:40px; direction:ltr !important;">
                        The
                        invoice
                        has been approved electronically
                        Any noted on the
                        invoice
                        within a week of its date.
                    </p>
                    <p
                            style="float: right; width: 320px; height: 100px; margin-bottom:40px;direction:ltr !important; ">
                        ملاحظة: الفاتورة معمدة
                        إلكترونيا
                        ولا حاجة للتوقيع أي ملاحظات
                        على الفاتورة خلال أسبوع من تاريخها
                    </p>
                </div>


            </t>
        </t>


    </template>


    <record id="paperformat_azbah_id" model="report.paperformat">
        <field name="name">AZBAH Paper format</field>
        <field name="default" eval="True"/>
        <field name="format">custom</field>
        <field name="page_height">297</field>
        <field name="page_width">210</field>
        <field name="orientation">Portrait</field>
        <field name="margin_top">1</field>
        <field name="margin_bottom">1</field>
        <field name="margin_left">5</field>
        <field name="margin_right">1</field>
        <field name="header_line" eval="False"/>
        <field name="header_spacing">1</field>
        <field name="dpi">90</field>
    </record>
    <report id="report_azbah_invoce_rep" string="Azbah Invoice"
            model="account.move" report_type="qweb-pdf"
            name="custom_invoice_templates.azbah_customer_invoice"
            file="custom_invoice_templates.azbah_customer_invoice"
            paperformat="custom_invoice_templates.paperformat_azbah_id"/>

</odoo>