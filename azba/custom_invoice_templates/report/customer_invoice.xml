<?xml version="1.0" encoding="utf-8"?>
<odoo>


    <template id="azbah_customer_invoice">
        <t t-foreach="docs" t-as="o">


            <t t-set="o" t-value="o.with_context(lang=lang)"/>
            <t t-call="web.html_container">


                <div class="article mt0 o_report_layout_standard"
                     style="direction:ltr !important;">

                    <div t-if="o.company_id.id == 1"
                         style="text-align: center;margin-right:1cm; direction:ltr !important;font-weight:bolder;font-size:20px;">
                        فاتورة ضريبية
                    </div>

                    <div t-else=""
                         style="text-align: center;margin-right:1cm; direction:ltr !important;font-weight:bolder;font-size:20px;">
                        فاتورة
                    </div>
                    فاتورة ضريبية
                    <div t-field="o.name"/>

                    <div style="text-align: center;margin-right:1cm; direction:ltr !important;font-weight:bolder;font-size:20px;">
                        <span t-field="o.name"/>
                    </div>


                    <table class="rounded" style="float:right;  width:100%;
                            direction:ltr !important;padding-top: 0px;
                           table-layout : fixed;
                           margin-top: 1cm; margin-bottom: 0.6cm;
                           border:1px solid black;padding:2px 2px 2px 2px;  box-shadow: 10px 10px 10px grey;">


                        <tr style="direction:ltr !important;text-align: center; background-color:#78c2e4">
                            <td colspan="4" style="padding:5px;">
                                <div style="float:left;  width: 100%; font-family: 'Cairo';
  font-style: normal;
  font-weight: bold;
  font-size:25px;
                            direction:rtl !important">
                                    السادة
                                    /
                                    <t t-esc="o.partner_id.name"/>
                                    -
                                    [
                                    <t t-esc="o.partner_id.code"/>
                                    ]
                                </div>
                            </td>

                        </tr>
                        <tr style="direction:ltr !important;text-align: left; background-color:#c1def4">
                            <td style="width: 25%;vertical-align:top; padding:1px;">
                                Invoice | رقم الفاتورة
                            </td>

                            <td style="width: 25%;vertical-align:top; padding:1px;">
                                <span t-field="o.name"/>
                            </td>


                            <td style="width: 25%;vertical-align:top; padding:1px;">
                                Date | التاريخ
                            </td>

                            <td style="width: 25%;vertical-align:top; padding:1px;">
                                <span t-field="o.invoice_date"
                                      style="direction:ltr !important;"
                                      t-options='{"widget": "date","format": "dd-MM-yyyy"}'/>
                            </td>

                        </tr>

                        <tr style="direction:ltr !important;text-align: left; background-color:#ffffff">
                            <td style="width: 25%;vertical-align:top; padding:1px;">
                                Manual Ref |
                                إذن التسليم
                            </td>

                            <td style="width: 25%;vertical-align:top; padding:1px;">
                                <span t-field="o.manual_ref"
                                      style="direction:ltr !important;"/>
                            </td>


                            <td style="width: 25%;vertical-align:top; padding:1px;">
                                Payment Method |
                                طريقة الدفع
                            </td>

                            <td style="width: 25%;vertical-align:top; padding:1px;">
                                <t t-foreach="o._get_reconciled_payments()" t-as="pay">
                                    <t t-esc="pay.journal_id.name"/>
                                    &amp;nbsp;
                                </t>
                            </td>

                        </tr>


                        <tr style="direction:ltr !important;text-align: left; background-color:#c1def4">
                            <td style="width: 25%;vertical-align:top; padding:1px;">
                                Due Date |
                                تاريخ الإستحقاق
                            </td>

                            <td style="width: 25%;vertical-align:top; padding:1px;">
                                <span t-field="o.invoice_date_due"
                                      style="direction:ltr !important;"
                                      t-options='{"widget": "date","format": "dd-MM-yyyy"}'/>
                            </td>


                            <td style="width: 25%;vertical-align:top; padding:1px;">
                                Sales order |
                                أمر البيع
                            </td>

                            <td style="width: 25%;vertical-align:top; padding:1px;">
                                <span t-field="o.invoice_origin"/>
                            </td>
                        </tr>


                        <tr style="direction:ltr !important;text-align: left; background-color:#ffffff">
                            <td style="width: 25%;vertical-align:top; padding:1px;">
                                Reference | المرجع

                            </td>

                            <td style="width: 25%;vertical-align:top; padding:1px;">
                                <span t-field="o.ref"/>
                            </td>
                            <td style="width: 25.5%;vertical-align:top; padding:1px;">
                                VAT | الرقم الضريبي

                            </td>

                            <td style="width: 25.5%;vertical-align:top; padding:1px;">
                                <div t-field="o.partner_id.vat"></div>
                            </td>
                        </tr>


                        <tr style="direction:ltr !important;text-align: left; background-color:#c1def4">


                            <td style="width: 25.5%;vertical-align:top; padding:1px;">
                                Delivery address
                                <br/>
                                عنوان التوصيل
                            </td>

                            <td colspan="3" style="width: 25.5%;vertical-align:top; padding:1px;">
                                <div t-field="o.partner_shipping_id"
                                     t-options='{"widget": "contact", "fields": ["address","street","street2","city","state_id","zip", "country_id"], "no_marker": True}'></div>
                            </td>
                        </tr>


                    </table>


                    <table class="items_table" style=" float: left;
    width: 100%;
    text-align: center;
    direction: ltr !important;
    padding-top: 0px;
    margin-top: 0.1cm;
    margin-bottom: 0.6cm;
     border: 1px solid black;text-align:center;
    box-shadow: 10px 10px 10px grey;">

                        <tr style="direction:ltr !important;text-align: center; background-color:#78c2e4">
                            <td colspan="7" style="padding:5px;">
                                <div style="float:left;  width: 100%; font-family: 'Cairo';
  font-style: normal;
  font-weight: bold;
  font-size:30px;
                            direction:rtl !important">
                                    تفاصيل الفاتورة

                                </div>
                            </td>

                        </tr>

                        <tr style="direction:ltr !important;text-align: left; background-color:#78c2e4; text-align:center">
                            <td style="width: 35%;vertical-align:top; padding:1px;  text-align:center">
                                Description
                            </td>
                            <td style="width: 10%;vertical-align:top; padding:1px; text-align:center">
                                Qty
                            </td>
                            <td style="width: 10%;vertical-align:top; padding:1px; text-align:center">
                                Sales Price
                            </td>
                            <td style="width: 10%;vertical-align:top; padding:1px; text-align:center">
                                Amount
                            </td>
                            <td style="width: 10%;vertical-align:top; padding:1px; text-align:center">
                                Tax %
                            </td>
                            <td style="width: 10%;vertical-align:top; padding:1px;  text-align:center">
                                Tax Amt.
                            </td>
                            <td style="width: 15%;vertical-align:top; padding:1px; text-align:center">
                                Amt After Tax
                            </td>

                        </tr>

                        <tr style="direction:ltr !important;text-align: left; background-color:#78c2e4">
                            <td style="width: 35%;vertical-align:top; padding:1px; text-align:center">
                                الوصف
                            </td>
                            <td style="width: 10%;vertical-align:top; padding:1px; text-align:center">
                                الكمية
                            </td>
                            <td style="width: 10%;vertical-align:top; padding:1px;text-align:center">
                                سعر البيع
                            </td>
                            <td style="width: 10%;vertical-align:top; padding:1px;text-align:center">
                                المبلغ
                            </td>
                            <td style="width: 10%;vertical-align:top; padding:1px;text-align:center">
                                نسبة الضريبة
                            </td>
                            <td style="width: 10%;vertical-align:top; padding:1px;text-align:center">
                                قيمة الضريبة
                            </td>
                            <td style="width: 15%;vertical-align:top; padding:1px;text-align:center">
                                الإجمالى بالضريبة
                            </td>
                        </tr>

                        <tr t-foreach="o.invoice_line_ids" t-as="line"
                            style="border-bottom: 3px solid black !important; direction:ltr !important;">


                            <td style="width: 35%;vertical-align:top; padding:1px;  border: 1px solid black;text-align:left">
                                <span t-field="line.with_context(lang='ar_001').product_id"
                                      style="direction:ltr !important;"/>
                            </td>


                            <td style="width: 10%;vertical-align:top; padding:1px;  border: 1px solid black;text-align:center">
                                <span t-field="line.quantity"
                                      style="direction:ltr !important;"/>
                            </td>
                            <td style="width: 10%;vertical-align:top; padding:1px;  border: 1px solid black;text-align:center">

                                <span t-field="line.price_unit"
                                      style="direction:ltr !important;"/>
                            </td>


                            <td style="width: 10%;vertical-align:top; padding:1px;  border: 1px solid black;text-align:center">


                                <span class="text-nowrap"
                                      style="direction:ltr !important;"
                                      t-field="line.price_subtotal"
                                      t-field-options="{&quot;widget&quot;: &quot;False&quot;}"
                                      groups="account.group_show_line_subtotals_tax_excluded"/>
                                <span class="text-nowrap"
                                      style="direction:ltr !important;" t-field="line.price_total"
                                      t-field-options="{&quot;widget&quot;: &quot;False&quot;}"
                                      groups="account.group_show_line_subtotals_tax_included"/>
                            </td>
                            <td style="width: 10%;vertical-align:top; padding:1px;  border: 1px solid black;text-align:center">
                                <span
                                        t-esc="', '.join(map(lambda x: str(x.amount), line.tax_ids))"
                                        id="line_tax_ids"/>
                                %
                            </td>

                            <td style="width: 10%;vertical-align:top; padding:1px;  border: 1px solid black;text-align:center">
                                <span t-field="line.amount_tax"
                                      t-field-options="{&quot;widget&quot;: &quot;False&quot;}"
                                />
                            </td>


                            <td style="width: 15%;vertical-align:top; padding:1px;text-align:right ; border: 1px solid black;text-align:center">

                                <t t-set="current_total_with_tax"
                                   t-value="line.amount_tax+line.price_subtotal"/>
                                <span t-esc="current_total_with_tax"/>
                            </td>
                        </tr>

                    </table>

                    <table
                            style="float:right;  width:100%;
                            direction:ltr !important;padding-top: 0px;
                           border:1px solid black;padding:2px 2px 2px 2px
                           box-shadow: 10px 10px 10px grey;
                            margin-bottom: 0.5cm; background-color:#c1def4;
                            ">

                        <tr style="background-color:#c1def4;border-bottom: 3px solid black !important; direction:ltr !important;">
                            <td
                                    style=" direction:ltr !important; text-align: center;">
                                Total before VAT
                                <br/>
                                الاجمالي قبل الضريبة
                            </td>
                            <td style="direction:ltr !important; text-align: left;vertical-aldign:middle">
                                <span t-field="o.amount_untaxed"
                                      style="direction:ltr !important"/>
                            </td>
                            <td style=" direction:ltr !important; text-align: center;">
                                VAT amount
                                <br/>
                                مبلغ الضريبة
                            </td>
                            <td class=" o_price_total"
                                style="direction:ltr !important; text-align: left;vertical-aldign:middle">
                                <span t-field="o.amount_tax"
                                      style="direction:ltr !important;"/>

                            </td>

                            <td style=" direction:ltr !important; text-align: center;">
                                Total
                                <br/>
                                الاجمالي
                            </td>

                            <td style="direction:ltr !important; text-align: left;vertical-aldign:middle">
                                <span t-if="o.amount_total"
                                      style="direction:ltr !important;" t-field="o.amount_total"/>
                            </td>

                        </tr>


                    </table>
                    <div style="direction:ltr;text-align:right;">
                        <h4>
                            <span style="border-top: 1px solid #ccc;border-bottom: 4px double #ccc;">
                                المبلغ المطلوب
                                <span style="padding-left: 1px;text-align: center;font-weight:bolder;text-decoration-style: double;"
                                      t-esc="o.currency_id.with_context(lang='en_US').amount_to_text(o.amount_total)"/>

                            </span>
                        </h4>
                    </div>

                    <div style="position:fixed;top:22.5cm;width:95%">

                        <span style="border:1px solid black;padding:2px 2px 2px 2px;  box-shadow: 10px 10px 10px grey;
                        float:left;direction:ltr !important;">
                            <div style="text-align:center;font-weight:bolder">Scan QR Code</div>
                            <t t-if="o.l10n_sa_qr_code_str">
                                <img style="text-align: center" t-if="o.l10n_sa_qr_code_str"
                                     t-att-src="'/report/barcode/?type=%s&amp;value=%s&amp;width=%s&amp;height=%s'%('QR', o.l10n_sa_qr_code_str, 150, 150)"/>
                            </t>
                        </span>
                        <span>
                            <table
                                    style="float: right;  width: 70%;  border-collapse:collapse; direction:ltr !important; ">
                                <thead style="direction:ltr !important; text-align: left;">
                                    <tr style="direction:ltr !important; text-align: left;">
                                        <th colspan="2"
                                            style="border:1px solid black;padding:10px;direction:ltr !important; text-align: left;padding-left: 10px;">
                                            Bank Details تفاصيل البنك
                                        </th>

                                    </tr>
                                </thead>
                                <tbody style="direction:ltr !important;">
                                    <tr style="direction:ltr !important; text-align: left;">

                                        <td style="border:1px solid black;;padding:10px; direction:ltr !important; text-align: left; padding-left: 10px;">
                                            Bank Name إسم البنك
                                        </td>
                                        <td style="border:1px solid black;;padding:10px; direction:ltr !important; text-align: left;">
                                            <span style="direction:ltr !important; text-align: left;font-weight:bolder">
                                                مصرف الراجحى
                                            </span>
                                        </td>

                                    </tr>
                                    <tr style="direction:ltr !important; text-align: left;">

                                        <td style="border:1px solid black;;padding:10px;direction:ltr !important; text-align: left; padding-left: 10px;">
                                            Account Name إسم الحساب
                                        </td>
                                        <td style="border:1px solid black;;padding:10px; direction:ltr !important; text-align: left;">
                                            <span t-field="o.company_id.partner_id"
                                                  style="direction:ltr !important; text-align: left;font-weight:bolder"></span>
                                        </td>

                                    </tr>
                                    <tr style="direction:ltr !important; text-align: left;">

                                        <td style="border:1px solid black;;padding:10px; direction:ltr !important; text-align: left;padding-left: 10px;">
                                            Account number رقم الحساب
                                        </td>
                                        <td style="border:1px solid black;;padding:10px; direction:ltr !important; text-align: left;">
                                            <span style="direction:ltr !important; text-align: left;font-weight:bolder;font-size:23px;">
                                                SA3080000242608010151635
                                            </span>
                                        </td>
                                    </tr>

                                </tbody>
                            </table>
                        </span>
                    </div>
                </div>

                <div class="footer" style="direction:ltr !important;">
                    <p
                            style="float: left; width: 340px; height: 100px;margin-bottom:40px; direction:ltr !important;">
                        The
                        invoice
                        has been approved electronically
                        Any noted on the
                        invoice
                        within a week of its date.
                    </p>
                    <p
                            style="float: right; width: 320px; height: 100px; margin-bottom:40px;direction:ltr !important; ">
                        ملاحظة: الفاتورة معمدة
                        إلكترونيا
                        ولا حاجة للتوقيع أي ملاحظات
                        على الفاتورة خلال أسبوع من تاريخها
                    </p>
                </div>


            </t>
        </t>


    </template>


    <record id="paperformat_azbah_id" model="report.paperformat">
        <field name="name">AZBAH Paper format</field>
        <field name="default" eval="True"/>
        <field name="format">custom</field>
        <field name="page_height">297</field>
        <field name="page_width">210</field>
        <field name="orientation">Portrait</field>
        <field name="margin_top">45</field>
        <field name="margin_bottom">1</field>
        <field name="margin_left">5</field>
        <field name="margin_right">1</field>
        <field name="header_line" eval="False"/>
        <field name="header_spacing">1</field>
        <field name="dpi">90</field>
    </record>


    <record id="report_azbah_invoce_rep" model="ir.actions.report">
        <field name="name">custom_invoice_templates.azbah_customer_invoice</field>
        <field name="model">account.move</field>
        <field name="report_type">qweb-pdf</field>
        <field name="report_file">custom_invoice_templates.azbah_customer_invoice</field>
        <field name="paperformat_id" ref="custom_invoice_templates.paperformat_azbah_id"/>

    </record>


</odoo>