<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <template id="operation_profile_template">
        <!-- predefined, t-call call existing functionality -->
        <t t-call="web.html_container">
            <t t-foreach="docs" t-as="operation">
                <div class="header">
                    <div></div>
                </div>
                <!-- either use same template, inherit external_layout or create your own -->
                <t t-call="web.external_layout">
                    <!-- each report will start from new page -->
                    <div class="page">
                        <br/>
                        <!--<h3>
                            <strong><span t-esc="operation.name"/></strong>
                        </h3>-->
                        <br/><br/><br/>
                        <table class="table table-bordered">
                            <tr>
                                <th class="text-center">الموضوع</th>
                                <td><span t-esc="operation.subject"/></td>
                            </tr>
                            <tr>
                                <th class="text-center">الجهة المعنية</th>
                                <td>
                                    <t t-foreach="operation.external_partner_ids" t-as="partner">
                                        <span t-esc="partner.name"/><br/>
                                    </t>
                                </td>
                            </tr>
                            <tr>
                                <th class="text-center">تاريخ المعاملة</th>
                                <td><span t-field="operation.date" t-field-options="{&quot;format&quot;: &quot;dd-MM-yyyy&quot;}"/></td>
                            </tr>
                        </table>
                        <br/><br/>
                        <div>
                            <span t-raw="operation.details"/>
                        </div>
                        <div>
                            <span t-raw="operation.sign_user_id.signature" />
                            <br/>
                            <span t-esc="operation.sign_data"/>
                        </div>
                        <div class="footer">
                            <div class="col-xs-4"></div>
                            <div class="col-xs-4">
                                <table class="text-center">
                                    <tr><td>
                                        <img t-att-src="'/report/barcode/?type=%s&amp;value=%s&amp;width=%s&amp;height=%s' % ('Code128', operation.name, 300, 50)"
                                         style="width:300px;height:50px;"/>
                                    </td></tr>
                                    <tr><td><span t-esc="operation.name"/></td></tr>
                                </table>
                            </div>
                        </div>
                    </div>
                </t>
            </t>
        </t>
    </template>

    <report
        id="ac_operation_report"
        string="طباعة المعاملة"
        model="ac.operation"
        report_type="qweb-pdf"
        name="ejad_erp_administrative_communications.operation_profile_template"
        print_report_name="(object.name)"
    />
</odoo>
