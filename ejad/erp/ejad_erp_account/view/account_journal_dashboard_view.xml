<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>
        <record id="journal_dashboard_view_inherit1" model="ir.ui.view">
            <field name="name">account.journal.dashboard.kanban.inherit</field>
            <field name="model">account.journal</field>
            <field name="inherit_id" ref="account.account_journal_dashboard_kanban_view"/>
            <field name="arch" type="xml">
                <xpath expr='//t[@t-name="JournalManage"]' position='replace'>
                    <t t-name="JournalManage">

                        <!-- For bank and cash -->
                        <div t-if="journal_type == 'bank' || journal_type == 'cash'" class="row">
                            <div  groups="ejad_erp_account.group_access_dashboard_data" class="col-xs-4 o_kanban_card_manage_section o_kanban_manage_view">
                                <div class="o_kanban_card_manage_title">
                                    <span>View</span>
                                </div>
                                <div>
                                    <a type="object" name="open_action">
                                        <t t-if="journal_type == 'bank'">Bank Statements</t>
                                        <t t-if="journal_type == 'cash'">Cash Statements</t>
                                    </a>
                                </div>
                                <div>
                                    <a type="object" name="open_action_with_context"
                                       context="{'action_name': 'action_bank_statement_line', 'search_default_journal': True}">
                                        Search Operations
                                    </a>
                                </div>
                                <div>
                                    <a type="object" name="open_action"
                                       context="{'action_name': 'action_account_moves_all_a'}"
                                       groups="base.group_no_one">Journal Items
                                    </a>
                                </div>
                            </div>

                            <div class="col-xs-4 o_kanban_card_manage_section o_kanban_manage_new">
                                <div class="o_kanban_card_manage_title">
                                    <span>New</span>
                                </div>
                                <div groups="ejad_erp_account.group_access_dashboard_data" name="bank_cash_commands">
                                    <t t-if="journal_type == 'bank'">
                                        <a type="object" name="create_bank_statement">Transaction</a>
                                    </t>
                                    <t t-if="journal_type == 'cash'">
                                        <a type="object" name="create_cash_statement">Transaction</a>
                                    </t>
                                </div>
                                <div>
                                    <a type="object" name="open_spend_money">Send Money</a>
                                </div>
                                <div>
                                    <a type="object" name="open_collect_money">Receive Money</a>
                                </div>
                                <div>
                                    <a type="object" name="open_transfer_money">Internal Transfer</a>
                                </div>
                            </div>

                            <div groups="ejad_erp_account.group_access_dashboard_data"  class="col-xs-4 o_kanban_card_manage_section o_kanban_manage_reconciliation">
                                <div class="o_kanban_card_manage_title">
                                    <span>Reconciliation</span>
                                </div>
                                <div>
                                    <a t-if="dashboard.number_to_reconcile > 0" type="object"
                                       name="action_open_reconcile">Reconcile
                                    </a>
                                    <span t-if="dashboard.number_to_reconcile == 0" class="text-muted">Nothing to
                                        Reconcile
                                    </span>
                                </div>
                                <div>
                                    <a type="object" name="open_action_with_context"
                                       context="{'action_name': 'action_account_reconcile_model', 'use_domain': True}"
                                       groups="account.group_account_manager">Reconciliation Models
                                    </a>
                                </div>
                            </div>
                        </div>

                        <!-- For purchase and sale -->
                        <div t-if="journal_type == 'purchase' || journal_type == 'sale'" class="row">
                            <div class="col-xs-4 o_kanban_card_manage_section o_kanban_manage_view">
                                <div class="o_kanban_card_manage_title">
                                    <span>View</span>
                                </div>
                                <div>
                                    <a t-if="journal_type == 'sale'" type="object" name="open_action"
                                       context="{'use_domain': [('type', '=', 'out_invoice')]}">Invoices
                                    </a>
                                    <a t-if="journal_type == 'purchase'" type="object" name="open_action"
                                       context="{'use_domain': [('type', '=', 'in_invoice')]}">Bills
                                    </a>
                                </div>
                                <div>
                                    <a t-if="journal_type == 'sale'" type="object" name="open_action"
                                       context="{'use_domain': [('type', '=', 'out_refund')], 'invoice_type': 'refund'}">
                                        Credit Notes
                                    </a>
                                    <a t-if="journal_type == 'purchase'" type="object" name="open_action"
                                       context="{'use_domain': [('type', '=', 'in_refund')], 'invoice_type': 'refund'}">
                                        Credit Notes
                                    </a>
                                </div>
                                <div>
                                    <a type="object" name="action_open_reconcile">Payments Matching</a>
                                </div>
                                <div>
                                    <a type="object" name="open_action"
                                       context="{'action_name': 'action_account_moves_all_a'}"
                                       groups="base.group_no_one">Journal Items
                                    </a>
                                </div>
                            </div>

                            <div class="col-xs-4 o_kanban_card_manage_section o_kanban_manage_new">
                                <div class="o_kanban_card_manage_title">
                                    <span>New</span>
                                </div>
                                <div>
                                    <a type="object" name="action_create_new">
                                        <span t-if="journal_type == 'sale'">Invoice</span>
                                        <span t-if="journal_type == 'purchase'">Bill</span>
                                    </a>
                                </div>
                                <div>
                                    <a type="object" name="action_create_new" context="{'refund':True}">
                                        <span t-if="journal_type == 'sale'">Credit Note</span>
                                        <span t-if="journal_type == 'purchase'">Credit Note Bill</span>
                                    </a>
                                </div>
                            </div>

                            <div class="col-xs-4 o_kanban_card_manage_section o_kanban_manage_reports">
                                <div class="o_kanban_card_manage_title">
                                    <span>Reporting</span>
                                </div>
                                <div>
                                    <a t-if="journal_type == 'sale'" type="action"
                                       name="%(account.action_account_invoice_report_all)d"
                                       groups="account.group_account_manager">Invoices Analysis
                                    </a>
                                    <a t-if="journal_type == 'purchase'" type="action"
                                       name="%(account.action_account_invoice_report_all_supp)d"
                                       groups="account.group_account_manager">Bills Analysis
                                    </a>
                                </div>
                            </div>
                        </div>

                        <!-- For general and situation -->
                        <div t-if="journal_type == 'general' || journal_type == 'situation'" class="row">
                            <div class="col-xs-4 o_kanban_card_manage_section o_kanban_manage_view">
                                <div class="o_kanban_card_manage_title">
                                    <span>View</span>
                                </div>
                                <div>
                                    <a type="object" name="open_action"
                                       context="{'action_name': 'action_move_journal_line', 'view_no_maturity': 1}">
                                        Journal Entries
                                    </a>
                                </div>
                                <div>
                                    <a type="object" name="open_action"
                                       context="{'action_name': 'action_move_journal_line', 'search_default_toreview': 1, 'view_no_maturity': 1}">
                                        Entries to Review
                                    </a>
                                </div>
                                <div>
                                    <a type="object" name="open_action"
                                       context="{'action_name': 'action_account_moves_all_a'}"
                                       groups="base.group_no_one">Journal Items
                                    </a>
                                </div>
                            </div>

                            <div class="col-xs-4 o_kanban_card_manage_section o_kanban_manage_new">
                                <div class="o_kanban_card_manage_title">
                                    <span>New</span>
                                </div>
                                <div>
                                    <a type="object" name="action_create_new">Journal Entry</a>
                                </div>
                            </div>

                            <div class="col-xs-4 o_kanban_card_manage_section o_kanban_manage_operations">
                                <div class="o_kanban_card_manage_title">
                                    <span>Operations</span>
                                </div>
                                <div>
                                    <a type="object" name="open_action_with_context"
                                       context="{'action_name': 'action_validate_account_move', 'search_default_journal': True}">
                                        Post All Entries
                                    </a>
                                </div>
                            </div>
                        </div>

                        <div t-if="widget.editable" class="o_kanban_card_manage_settings row">
                            <div class="col-xs-8">
                                <ul class="oe_kanban_colorpicker" data-field="color"/>
                            </div>
                        </div>

                        <div groups="account.group_account_manager" class="row o_kanban_card_settings">
                            <div class="col-xs-6">
                                <field name="show_on_dashboard" widget="boolean_favorite"/>
                            </div>
                            <div class="col-xs-6 text-right">
                                <a t-if="widget.editable" type="edit">Settings</a>
                            </div>
                        </div>
                    </t>


                </xpath>
            </field>
        </record>
    </data>
</openerp>

