<odoo>
    <data>
        <!--    remove editable button and add helpdesk_team_id field-->
        <record id="add_team_helpdesk_ticket_type" model="ir.ui.view">
            <field name="name">add.team.ticket.type</field>
            <field name="model">helpdesk.ticket.type</field>
            <field name="inherit_id" ref="helpdesk.helpdesk_ticket_type_view_tree"/>
            <field name="arch" type="xml">
                <xpath expr='//tree' position='replace'>
                    <tree string="Tag">
                        <field name="sequence" widget="handle" groups="base.group_no_one"/>
                        <field name="name"/>
                        <field name="helpdesk_team_id" options="{'no_create_edit': True}"/>
                    </tree>
                </xpath>
            </field>
        </record>

        <!--        add form view for helpdesk.ticket.type-->
        <record id="helpdesk_ticket_type_form_view" model="ir.ui.view">
            <field name="name">Ticket Type Form</field>
            <field name="model">helpdesk.ticket.type</field>
            <field name="arch" type="xml">
                <form string="Tickets Type">
                    <sheet>
                        <group>
                            <group>
                                <field name="name" required="1"/>
                                <field name="helpdesk_team_id" required="1" options="{'no_create_edit': True}"/>
                            </group>
                        </group>
                        <notebook>
                            <page string="Sub Tickets Types">
                                <field name="ticket_type_line_ids">
                                    <tree editable="top">
                                        <field name="name"/>
                                    </tree>
                                </field>
                            </page>
                        </notebook>
                    </sheet>
                </form>
            </field>
        </record>

        <record id="helpdesk_ticket_type_line_form_view" model="ir.ui.view">
            <field name="name">Ticket Type Line Form</field>
            <field name="model">helpdesk.ticket.type.line</field>
            <field name="arch" type="xml">
                <form string="sub tickets Type">
                    <sheet>
                        <group>
                            <group>
                                <field name="name" required="1"/>
                                <field name="ticket_type_id" required="1"/>
                            </group>
                        </group>
                    </sheet>
                </form>
            </field>
        </record>

        <record id="helpdesk_ticket_type_line_tree_view" model="ir.ui.view">
            <field name="name">Ticket Type Line Tree</field>
            <field name="model">helpdesk.ticket.type.line</field>
            <field name="arch" type="xml">
                <tree editable="top" string="Sub Ticket Type">
                    <field name="name" required="1"/>
                    <field name="ticket_type_id" widget="selection" required="1"/>
                </tree>
            </field>
        </record>
        <!-- add field ticket_type_line_id to helpdesk.ticket for view        -->
        <record id="sub_ticket_type_field_ticket_view_form" model="ir.ui.view">
            <field name="name">add.sub.ticket.type.field</field>
            <field name="model">helpdesk.ticket</field>
            <field name="inherit_id" ref="helpdesk.helpdesk_ticket_view_form"/>
            <field name="arch" type="xml">
                <xpath expr="//field[@name='ticket_type_id']" position="after">
                    <field name="ticket_type_line_id"/>
                </xpath>
                <!-- Add mobile number -->
                <xpath expr="//field[@name='partner_email']" position="after">
                    <field name="mobile"/>
                </xpath>
                <xpath expr="//field[@name='description']" position="after">
                    <group>
                        <field name="replay_partner" string="Replay to partner" groups="ejad_erp_helpdesk.group_helpdesk_replay_to_partner"/>
                    </group>
                </xpath>
            </field>
        </record>

        <record id="helpdesk_ticket_customer_tree_view" model="ir.ui.view">
            <field name="name">Customers Has Tickets</field>
            <field name="model">res.partner</field>
            <field name="arch" type="xml">
                <tree string="Customers">
                    <field name="name"/>
                    <field name="phone"/>
                    <field name="email"/>
<!--                    <field name="ticket_count"/>-->
<!--                    <field name="ticket_count_x"/>-->
                </tree>
            </field>
        </record>

        <record id="action_helpdesk_ticket_type_line_tree" model="ir.actions.act_window">
            <field name="name">Sub Ticket Type</field>
            <field name="res_model">helpdesk.ticket.type.line</field>
            <field name="view_mode">tree,form</field>
            <field name="help" type="html">
                <p class="o_view_nocontent_smiling_face">
                    Create a new Sub ticket type
                </p>
            </field>
        </record>

        <!-- action to load customer who has tickets only        -->
        <record id="action_helpdesk_customer_ticket" model="ir.actions.act_window">
            <field name="name">Customers</field>
            <field name="res_model">res.partner</field>
            <field name="view_mode">tree,form</field>
            <field name="view_id" ref="helpdesk_ticket_customer_tree_view"/>
            <field name="domain">[('ticket_count', '>', 0)]</field>
        </record>

        <menuitem id="menu_sub_ticket_type_tree"
                  action="action_helpdesk_ticket_type_line_tree"
                  name="Sub Tickets Types"
                  parent="helpdesk.helpdesk_menu_config"
                  sequence="2"
        />
        <!-- add new menu item for customers who have tickets       -->
         <menuitem id="menu_customer_ticket"
                  action="action_helpdesk_customer_ticket"
                  name="Customers"
                  parent="helpdesk.menu_helpdesk_root"
                  sequence="19"
        />
    </data>
</odoo>